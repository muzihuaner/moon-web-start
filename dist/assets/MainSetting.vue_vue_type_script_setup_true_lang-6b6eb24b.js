import{d as I,u as R,j as B,f as n,o as F,c as O,b as g,t as m,g as l,c7 as f,c8 as v,c9 as b,ca as h,cb as S,cc as V,cd as w,ce as k,cf as C,cg as D,ch as U,ci as $,w as p,a as c,h as _,v as y,cj as z,ck as T,c5 as u,l as J}from"./index-a8f1b17d.js";import{_ as i}from"./SettingSelection.vue_vue_type_script_setup_true_lang-91ab2271.js";const A={key:0,px:"md:32 lg:64"},W={"my-16":"",text:"16 $text-c-1",italic:""},q={grid:"","grid-cols-2":"",md:"grid-cols-3",lg:"grid-cols-4","justify-between":"","gap-12":""},G={"mt-24":"",flex:"","flex-wrap":"","justify-center":"","gap-12":""},H={"my-24":"","flex-center":""},Y=I({__name:"MainSetting",setup(K){const t=R(),r=B();function x(s){const o=f.children.find(e=>e.key===s.key).value.bgC;return y("div",{class:"flex items-center gap-x-8"},[y("div",{class:"w-16 h-16 circle border-1 border-fff",style:{backgroundColor:o}}),y("div",z(s.name))])}function L(s){t.setSettings({language:s}),T(s)}function j(s){r.setCateIndex(0),t.setSettings({websitePreference:s}),t.refreshSiteContainer()}function P(){const s={data:r.data,settings:t.settings},a=JSON.stringify(s),o=new Blob([a],{type:"application/json"}),e=URL.createObjectURL(o),d=document.createElement("a");d.download=`MoonStart_Data_${new Date().toLocaleString()}.json`,d.href=e,document.body.appendChild(d),d.click(),URL.revokeObjectURL(e),$message.success(u("messages.exported"))}function E(){const s=document.createElement("input");s.type="file",s.accept=".json",s.addEventListener("change",async()=>{var o;const a=(o=s.files)==null?void 0:o[0];if(a)try{const e=await a.text(),d=JSON.parse(e);if(!d.data||!d.settings)throw new Error("Invalid data");N(d),t.setSettings({websitePreference:"Customize"}),t.refreshSiteContainer(),$message.success(u("messages.imported"))}catch{$message.error(u("messages.warnInvalidImport"))}}),s.click()}function M(){$dialog.warning({title:u("messages.tip"),content:u("messages.warnResetData"),positiveText:u("button.confirm"),negativeText:u("button.cancel"),onPositiveClick(){r.restoreData(),t.restoreSettings(),v(t.settings.theme),T(t.settings.language),t.refreshSiteContainer(),$message.success(u("messages.reset")),r.setCateIndex(0)}})}function N(s){r.setData(s.data),t.setSettings(s.settings),v(s.settings.theme)}return(s,a)=>{const o=J;return n(t).isSetting?(F(),O("section",A,[g("div",W,m(s.$t("settings.title")),1),g("div",q,[l(i,{modelValue:n(t).settings.theme,"onUpdate:modelValue":a[0]||(a[0]=e=>n(t).settings.theme=e),title:f.name,options:f.children,"render-label":x,"label-field":"name","value-field":"key","on-update-value":e=>("toggleTheme"in s?s.toggleTheme:n(v))(e)},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.language,"onUpdate:modelValue":a[1]||(a[1]=e=>n(t).settings.language=e),title:b.name,options:b.children,"label-field":"name","value-field":"key","on-update-value":e=>L(e)},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.websitePreference,"onUpdate:modelValue":a[2]||(a[2]=e=>n(t).settings.websitePreference=e),title:h.name,options:h.children,"label-field":"name","value-field":"key","on-update-value":j},null,8,["modelValue","title","options"]),l(i,{modelValue:n(t).settings.tagMode,"onUpdate:modelValue":a[3]||(a[3]=e=>n(t).settings.tagMode=e),title:S.name,options:S.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({tagMode:e})},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.search,"onUpdate:modelValue":a[4]||(a[4]=e=>n(t).settings.search=e),title:V.name,options:V.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({search:e})},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.iconStyle,"onUpdate:modelValue":a[5]||(a[5]=e=>n(t).settings.iconStyle=e),title:w.name,options:w.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({iconStyle:e})},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.linkStrategy,"onUpdate:modelValue":a[6]||(a[6]=e=>n(t).settings.linkStrategy=e),title:k.name,options:k.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({linkStrategy:e})},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.showTime,"onUpdate:modelValue":a[7]||(a[7]=e=>n(t).settings.showTime=e),title:C.name,options:C.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showTime:e})},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.showDate,"onUpdate:modelValue":a[8]||(a[8]=e=>n(t).settings.showDate=e),title:D.name,options:D.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showDate:e})},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.showLunar,"onUpdate:modelValue":a[9]||(a[9]=e=>n(t).settings.showLunar=e),title:U.name,options:U.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showLunar:e})},null,8,["modelValue","title","options","on-update-value"]),l(i,{modelValue:n(t).settings.showFooter,"onUpdate:modelValue":a[10]||(a[10]=e=>n(t).settings.showFooter=e),title:$.name,options:$.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showFooter:e})},null,8,["modelValue","title","options","on-update-value"])]),g("div",G,[l(o,{type:"primary",secondary:"",onClick:M},{default:p(()=>[c(m(s.$t("button.resetData")),1)]),_:1}),l(o,{type:"success",secondary:"",onClick:E},{default:p(()=>[c(m(s.$t("button.importData")),1)]),_:1}),l(o,{type:"primary",onClick:P},{default:p(()=>[c(m(s.$t("button.exportData")),1)]),_:1})]),g("div",H,[l(o,{size:"large",type:"primary",onClick:a[11]||(a[11]=e=>s.$router.back())},{default:p(()=>[c(m(s.$t("button.complete")),1)]),_:1})])])):_("",!0)}}});export{Y as _};
