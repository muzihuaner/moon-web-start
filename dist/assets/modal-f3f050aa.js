import{c4 as T,h as r,C as A,i as M,bh as b,c5 as s,c3 as p,a1 as v,c6 as m}from"./index-409d7e60.js";const w={add:()=>s("common.add"),update:()=>s("common.edit")},E={cate:()=>s("common.cate"),group:()=>s("common.group"),site:()=>s("common.site")},D=T("modal",()=>{const o=r(!1),i=r("add"),a=r("site"),C=A(()=>w[i.value]()+E[a.value]()),e=M(),t=b({name:"",url:"",favicon:"",desc:""});function g(n,f,d=-1,l=-1){i.value=n,a.value=f,d!==-1&&e.setGroupIndex(d),l!==-1&&e.setSiteIndex(l),o.value=!0,n==="update"&&Object.assign(t,{site:()=>m(t,e.data[e.cateIndex].groupList[d].siteList[l]),group:()=>m(t,e.data[e.cateIndex].groupList[d]),cate:()=>m(t,e.data[e.cateIndex])}[f]())}let u=0;const S={add:{site:()=>e.addSite({id:u,...t}),group:()=>e.addGroup({id:u,name:t.name,siteList:[]}),cate:()=>e.addCate({id:u,name:t.name,groupList:[]})},update:{site:()=>e.updateSite({...t}),group:()=>e.updateGroup({name:t.name}),cate:()=>e.updateCate({name:t.name})}},h={site:()=>e.deleteSite(),group:()=>e.deleteGroup(),cate:()=>e.deleteCate()};function x(){o.value=!1}let c=!1;function G(){c||p()&&(c=!0,v(()=>{u=Date.now(),S[i.value][a.value](),o.value=!1,setTimeout(()=>c=!1,1e3)}))}function I(){p()&&v(()=>{h[a.value](),o.value=!1,a.value==="cate"&&e.cateIndex>0&&e.setCateIndex(e.cateIndex-1)})}function L(){let n;for(n in t)t[n]=""}return{modalVisible:o,action:i,target:a,title:C,inputValues:t,showModal:g,handleCancel:x,handleCommit:G,handleDelete:I,clearInput:L}});export{D as u};
